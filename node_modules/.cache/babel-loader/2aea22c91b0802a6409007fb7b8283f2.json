{"remainingRequest":"D:\\Project\\real-estate\\node_modules\\babel-loader\\lib\\index.js!D:\\Project\\real-estate\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Project\\real-estate\\src\\services\\authServices.js","dependencies":[{"path":"D:\\Project\\real-estate\\src\\services\\authServices.js","mtime":1582295657985},{"path":"D:\\Project\\real-estate\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Project\\real-estate\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Project\\real-estate\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKCi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovCgovKiBlc2xpbnQtZGlzYWJsZSBwcmV0dGllci9wcmV0dGllciAqLwppbXBvcnQgY29uZmlnIGZyb20gJ0AvY29uZmlnL2NvbmZpZyc7CnZhciBhdXRoU3RyaW5nID0gYnRvYSgiIi5jb25jYXQoY29uZmlnLmFwcEtleSwgIjoiKS5jb25jYXQoY29uZmlnLmFwcFNlY3JldCkpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKCnZhciBsb2dpblVzZXIgPSBmdW5jdGlvbiBsb2dpblVzZXIodXNlcikgewogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VybmFtZScsIHVzZXIudXNlcm5hbWUpOwogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhdXRodG9rZW4nLCB1c2VyLmF1dGh0b2tlbik7CiAgcmV0dXJuIHVzZXI7Cn07CgpleHBvcnQgdmFyIGF1dGhTZXJ2aWNlID0gewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhdXRoVG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRodG9rZW4nKQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXV0aFRva2VuICE9PSBudWxsOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy4kcm9vdC4kb24oJ2xvZ2dlZC1pbicsIGZ1bmN0aW9uIChhdXRodG9rZW4pIHsKICAgICAgcmV0dXJuIF90aGlzLmF1dGhUb2tlbiA9IGF1dGh0b2tlbjsKICAgIH0pOwogIH0KfTsKZXhwb3J0IHZhciBhdXRoZW50aWNhdGUgPSB7CiAgbWV0aG9kczogewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIodXNlcm5hbWUsIHBhc3N3b3JkLCBlbWFpbCkgewogICAgICByZXR1cm4gdGhpcy4kaHR0cC5wb3N0KCIvdXNlci8iLmNvbmNhdChjb25maWcuYXBwS2V5KSwgewogICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsCiAgICAgICAgZW1haWw6IGVtYWlsIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwoKICAgICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhOwogICAgICAgIHJldHVybiBsb2dpblVzZXIoewogICAgICAgICAgdXNlcm5hbWU6IGRhdGEudXNlcm5hbWUsCiAgICAgICAgICBhdXRodG9rZW46IGRhdGEuX2ttZC5hdXRodG9rZW4KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkgewogICAgICByZXR1cm4gdGhpcy4kaHR0cC5wb3N0KCJ1c2VyLyIuY29uY2F0KGNvbmZpZy5hcHBLZXksICIvbG9naW4iKSwgewogICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7CiAgICAgICAgcmV0dXJuIGxvZ2luVXNlcih7CiAgICAgICAgICB1c2VybmFtZTogZGF0YS51c2VybmFtZSwKICAgICAgICAgIGF1dGh0b2tlbjogZGF0YS5fa21kLmF1dGh0b2tlbgogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLiRodHRwLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsnQXV0aG9yaXphdGlvbiddID0gIkJhc2ljICIuY29uY2F0KGF1dGhTdHJpbmcpOwogIH0KfTs="},{"version":3,"sources":["D:/Project/real-estate/src/services/authServices.js"],"names":["config","authString","btoa","appKey","appSecret","loginUser","user","localStorage","setItem","username","authtoken","authService","data","authToken","getItem","computed","isAuthenticated","created","$root","$on","authenticate","methods","register","password","email","$http","post","then","_kmd","login","defaults","headers"],"mappings":";;AAAA;;AACA;AACA,OAAOA,MAAP,MAAmB,iBAAnB;AACA,IAAMC,UAAU,GAAGC,IAAI,WAAIF,MAAM,CAACG,MAAX,cAAqBH,MAAM,CAACI,SAA5B,EAAvB,C,CAGA;;AACA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAAAC,IAAI,EAAI;AACtBC,EAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCF,IAAI,CAACG,QAAtC;AACAF,EAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCF,IAAI,CAACI,SAAvC;AAEA,SAAOJ,IAAP;AACH,CALD;;AAOA,OAAO,IAAMK,WAAW,GAAG;AACvBC,EAAAA,IADuB,kBAChB;AACH,WAAO;AACHC,MAAAA,SAAS,EAAEN,YAAY,CAACO,OAAb,CAAqB,WAArB;AADR,KAAP;AAGH,GALsB;AAMvBC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,eADM,6BACY;AACd,aAAO,KAAKH,SAAL,KAAmB,IAA1B;AACH;AAHK,GANa;AAWzBI,EAAAA,OAXyB,qBAWf;AAAA;;AACR,SAAKC,KAAL,CAAWC,GAAX,CAAe,WAAf,EAA4B,UAACT,SAAD;AAAA,aAAe,KAAI,CAACG,SAAL,GAAiBH,SAAhC;AAAA,KAA5B;AACD;AAbwB,CAApB;AAgBP,OAAO,IAAMU,YAAY,GAAG;AACxBC,EAAAA,OAAO,EAAE;AACL;AACAC,IAAAA,QAFK,oBAEIb,QAFJ,EAEcc,QAFd,EAEwBC,KAFxB,EAE+B;AAChC,aAAO,KAAKC,KAAL,CAAWC,IAAX,iBAAyB1B,MAAM,CAACG,MAAhC,GAA0C;AAC7CM,QAAAA,QAAQ,EAARA,QAD6C;AAE7Cc,QAAAA,QAAQ,EAARA,QAF6C;AAG7CC,QAAAA,KAAK,EAALA,KAH6C,CAIjD;;AAJiD,OAA1C,EAKJG,IALI,CAKE;AAAA,YAAEf,IAAF,QAAEA,IAAF;AAAA,eAAYP,SAAS,CAAC;AAC3BI,UAAAA,QAAQ,EAAEG,IAAI,CAACH,QADY;AAE3BC,UAAAA,SAAS,EAAEE,IAAI,CAACgB,IAAL,CAAUlB;AAFM,SAAD,CAArB;AAAA,OALF,CAAP;AASH,KAZI;AAcLmB,IAAAA,KAdK,iBAcCpB,QAdD,EAcWc,QAdX,EAcqB;AACtB,aAAO,KAAKE,KAAL,CAAWC,IAAX,gBAAwB1B,MAAM,CAACG,MAA/B,aAA+C;AAClDM,QAAAA,QAAQ,EAARA,QADkD;AAElDc,QAAAA,QAAQ,EAARA;AAFkD,OAA/C,EAGJI,IAHI,CAGC;AAAA,YAAEf,IAAF,SAAEA,IAAF;AAAA,eAAaP,SAAS,CAAC;AAC3BI,UAAAA,QAAQ,EAAEG,IAAI,CAACH,QADY;AAE3BC,UAAAA,SAAS,EAAEE,IAAI,CAACgB,IAAL,CAAUlB;AAFM,SAAD,CAAtB;AAAA,OAHD,CAAP;AAOH;AAtBI,GADe;AA0BxBO,EAAAA,OA1BwB,qBA0Bd;AACN,SAAKQ,KAAL,CAAWK,QAAX,CAAoBC,OAApB,CAA4BL,IAA5B,CAAiC,eAAjC,oBAA6DzB,UAA7D;AACH;AA5BuB,CAArB","sourcesContent":["/* eslint-disable no-undef */\r\n/* eslint-disable prettier/prettier */\r\nimport config from '@/config/config';\r\nconst authString = btoa(`${config.appKey}:${config.appSecret}`);\r\n\r\n\r\n// eslint-disable-next-line no-unused-vars\r\nconst loginUser = user => {\r\n    localStorage.setItem('username', user.username);\r\n    localStorage.setItem('authtoken', user.authtoken);\r\n\r\n    return user;\r\n};\r\n\r\nexport const authService = {\r\n    data() {\r\n        return {\r\n            authToken: localStorage.getItem('authtoken')\r\n        }\r\n    },\r\n    computed: {\r\n        isAuthenticated() {\r\n            return this.authToken !== null;\r\n        }\r\n    },\r\n  created() {\r\n    this.$root.$on('logged-in', (authtoken) => this.authToken = authtoken)\r\n  }\r\n}\r\n\r\nexport const authenticate = {\r\n    methods: {\r\n        // eslint-disable-next-line no-unused-vars\r\n        register(username, password, email) {\r\n            return this.$http.post(`/user/${config.appKey}`, {\r\n                username,\r\n                password,\r\n                email\r\n            // eslint-disable-next-line no-unused-vars\r\n            }).then( ({data}) => loginUser({\r\n                username: data.username,\r\n                authtoken: data._kmd.authtoken\r\n            }));\r\n        },\r\n\r\n        login(username, password) {\r\n            return this.$http.post(`user/${config.appKey}/login`, {\r\n                username,\r\n                password,\r\n            }).then(({data})  => loginUser({\r\n                username: data.username,\r\n                authtoken: data._kmd.authtoken\r\n            }));\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.$http.defaults.headers.post['Authorization'] = `Basic ${authString}`;\r\n    }\r\n};\r\n"]}]}